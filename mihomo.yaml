port: 7890
allow-lan: true
mode: rule
log-level: warning
external-controller: 127.0.0.1:9090
external-ui: ui
unified-delay: true
tcp-concurrent: true
dns:
  enable: true
  use-hosts: true
  use-system-hosts: true
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  respect-rules: true
  nameserver:
    - 1.1.1.1
    - 8.8.8.8
  proxy-server-nameserver:
    - 119.29.29.29
    - 114.114.114.114
  nameserver-policy:
    "rule-set:cnsite":
    - 119.29.29.29
    - 114.114.114.114
  fake-ip-filter:
    - "*.lan"
    - "*.local"
    - "*.localhost"
    - "*.localdomain"
    - "*.home.arpa"
    - "*.invalid"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "+.pool.ntp.org"
    - "time.*.com"
    - "time.*.gov"
    - "time.*.edu.cn"
    - "time.*.apple.com"
    - "time-ios.apple.com"
    - "ntp.*.com"
    - "*.ntp.org.cn"
    - "*.time.edu.cn"
    - "+.stun"
    - turn.cloudflare.com
    - "+.rustdesk.com"
    - "lens.l.google.com"
    - "rule-set:cnsite"

proxy-groups:
  - name: Emby
    type: select
    include-all: true
    filter: è‡ªå»º|å®žéªŒ|ç›´è¿ž|TEST
    proxies:
      - DEFAULT
      - DIRECT
  - name: GitHub
    type: select
    include-all: true
    filter: è‡ªå»º|å®žéªŒ|ç›´è¿ž|TEST
    proxies:
      - DEFAULT
      - DIRECT
  - name: Netflix
    type: select
    include-all: true
    filter: è‡ªå»º|å®žéªŒ|ç›´è¿ž|TEST
    proxies:
      - DEFAULT
      - DIRECT
  - name: Steam
    type: select
    include-all: true
    filter: è‡ªå»º|å®žéªŒ|ç›´è¿ž|TEST
    proxies:
      - DEFAULT
      - DIRECT
  - name: YouTube
    type: select
    include-all: true
    filter: è‡ªå»º|å®žéªŒ|ç›´è¿ž|TEST
    proxies:
      - DEFAULT
      - DIRECT
  - name: EU
    type: select
    include-all: true
    filter: ðŸ‡«ðŸ‡·|ðŸ‡©ðŸ‡ª|ðŸ‡®ðŸ‡¹|ðŸ‡³ðŸ‡±|ðŸ‡ªðŸ‡¸|ðŸ‡¬ðŸ‡§
    proxies:
      - DEFAULT
      - DIRECT
  - name: HK
    type: select
    include-all: true
    filter: ðŸ‡­ðŸ‡°
    proxies:
      - DEFAULT
      - DIRECT
  - name: JP
    type: select
    include-all: true
    filter: ðŸ‡¯ðŸ‡µ
    proxies:
      - DEFAULT
      - DIRECT
  - name: US
    type: select
    include-all: true
    filter: ðŸ‡ºðŸ‡¸
    proxies:
      - DEFAULT
      - DIRECT
  - name: DEFAULT
    include-all: true
    type: select
    proxies:
      - DIRECT

rule-providers:
  category-ads-all:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ads-all.mrs
    path: ./ruleset/category-ads-all.mrs
    interval: 86400
  cnip:
    type: http
    format: mrs
    behavior: ipcidr
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs
    path: ./ruleset/cnip.mrs
    interval: 86400
  cnsite:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs
    path: ./ruleset/cn.mrs
    interval: 86400
  emby:
    type: http
    format: text
    behavior: classical
    url: https://raw.githubusercontent.com/yahngming/rules/master/emby.list
    path: ./ruleset/emby.list
    interval: 86400
  github:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.mrs
    path: ./ruleset/github.mrs
    interval: 86400
  netflix:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs
    path: ./ruleset/netflix.mrs
    interval: 86400
  private:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs
    path: ./ruleset/private.mrs
    interval: 86400
  steam:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam.mrs
    path: ./ruleset/steam.mrs
    interval: 86400
  turtlewow:
    type: http
    format: text
    behavior: classical
    url: https://raw.githubusercontent.com/yahngming/rules/master/turtlewow.list
    path: ./ruleset/turtlewow.list
    interval: 86400
  white:
    type: http
    format: text
    behavior: classical
    url: https://raw.githubusercontent.com/yahngming/rules/master/white.list
    path: ./ruleset/white.list
    interval: 86400
  youtube:
    type: http
    format: mrs
    behavior: domain
    url: https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.mrs
    path: ./ruleset/youtube.mrs
    interval: 86400
  youtubemusic:
    type: http
    format: text
    behavior: classical
    url: https://raw.githubusercontent.com/yahngming/rules/master/youtubemusic.list
    path: ./ruleset/youtubemusic.list
    interval: 86400

rules:
  - RULE-SET,category-ads-all,REJECT
  - RULE-SET,private,DIRECT
  - RULE-SET,cnip,DIRECT
  - RULE-SET,cnsite,DIRECT
  - RULE-SET,emby,Emby
  - RULE-SET,github,GitHub
  - RULE-SET,white,GitHub
  - RULE-SET,netflix,Netflix
  - RULE-SET,steam,Steam
  - RULE-SET,youtube,YouTube
  - RULE-SET,turtlewow,EU
  - RULE-SET,youtubemusic,US
  - MATCH,DEFAULT
